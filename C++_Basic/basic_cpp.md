Basic_cpp
===============


### static用法

static： 译为 “静态的，”


首先：我们对static的用法做一个总结

<font color=red> <font size=4> （1）修饰普通变量

修改变量的存储区域和生命周期，使变量存储在静态区，在 main 函数运行前就分配了空间，如果有初始值就用初始值初始化它，如果没有初始值系统用默认值初始化它


<font color=red> <font size=4> （2）修饰普通函数


表明函数的作用范围，仅在**定义该函数的文件内才能使用**。在多人开发项目时，为了防止与他人命名空间里的函数重名，可以将函数定位为 static。

<font color=red> <font size=4> （3）修饰成员变量

修饰成员变量使所有的对象只保存一个该变量，而且不需要生成对象就可以访问该成员

<font color=red> <font size=4> （4）修饰成员函数

修饰成员函数使得不需要生成对象就可以访问该函数，但是在 static 函数内不能访问非静态成员。

**（在OOP中，static所修饰的变量属于类所有，而非类的对象）**






-------

static作用
-

<font color=red> <font size=5>（1）  扩展生命周期





<font color=red> <font size=5>（2）限制作用域


<font color=red> <font size=5>（3）唯一性







##### 生存周期 作用域
<table> <tr> <td bgcolor=#ff83fa>
生存周期: 变量从定义到销毁的时间范围。存放在全局数据区的变量的生存周期存在于整个程序运行期间，而存放在栈中的数据则随着函数等的作用域结束导致出栈而销毁，除了静态变量之外的局部变量都存放于栈中。

<table> <tr> <td bgcolor=#ff83fa>作用域: 变量的可见代码域（块作用域，函数作用域，类作用域，程序全局作用域）。



<font color=red> <font size=5> 说到data的空间布局，自然离不开C++内存布局

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190424154622706.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzA4MDI3,size_16,color_FFFFFF,t_70)

1）正文段——CPU执行的机器指令部分；一个程序只有一个副本；只读，防止程序由于意外事故而修改自身指令；

2）初始化数据段（数据段）——在程序中所有赋了初值的全局变量，存放在这里。

3）非初始化数据段（bss段）——在程序中没有初始化的全局变量；内核将此段初始化为0。

 4）栈——增长方向：自顶向下增长；自动变量以及每次函数调用时所需要保存的信息（返回地址；环境信息）。

5）堆——动态存储分。






**需要注意的几个地方**


- static修饰局部变量时，使得被修饰的变量成为静态变量，存储在静态区。（存储在静态区的数据生命周期与程序相同，在main函数之前初始化，在程序退出时销毁。（无论是局部静态还是全局静态））

   局部静态变量使得该变量在退出函数后，不会被销毁，因此再次调用该函数时，该变量的值与上次退出函数时值相同。值得注意的是，生命周期并不代表其可以一直被访问，因为变量的访问还受到其作用域的限制。

 
-  static修饰函数
static修饰函数使得函数只能在包含该函数定义的文件中被调用。

> 注意： 在头文件b.h中声明静态函数fun()，在文件b.cpp中定义静态函数fun()，编译器会报错，指明b.h中的fun函数未定义。 
对于静态函数，声明和定义需要放在同一个文件夹中。
如果将static函数定义在头文件中，则每一个包含该头文件的文件都实现了一个fun函数。因此static实现了不同文件中定义同名的函数，而不发生冲突。
在多人协同工作的项目中，为了避免出现同名的函数冲突，可以将函数定义为static，从而避免冲突的发生。


- static 类成员
static声明静态成员表明类本身的属性，而不属于某个对象

 <1>.   成员


   访问：调用 “.” 成员访问运算符（无需this）
  对象访问





 <2>.成员函数




--------------
附：常见问题
1. static全局变量与普通的全局变量有什么区别 ?

　声明方式：全局变量(外部变量)的说明之前再冠以static 就构成了静态的全局变量。

相同点：（1）全局变量本身就是静态存储方式， 静态全局变量当然也是静态存储方式。

　区别： 
　（1）作用域不同  &　或者说可见性不同
　这两者的区别在于非静态全局变量的作用域是整个源程序， 当一个源程序由多个源文件组成时，非静态的全局变量在各个源文件中都是有效的。 而静态全局变量则限制了其作用域， 即只在定义该变量的源文件内有效， 在同一源程序的其它源文件中不能使用它。由于静态全局变量的作用域局限于一个源文件内，只能为该源文件内的函数公用，因此可以避免在其它源文件中引起错误。 

（2）static全局变量只初始化一次，防止在其他文件单元中被引用; 　 

2.  static局部变量和普通局部变量有什么区别 ？

 　　
 　　

     　　把局部变量改变为静态变量后是改变了它的存储方式即改变了它的生存期。
 　　
 　        


          　把全局变量改变为静态变量后是改变了它的作用域，限制了它的使用范围。  

　　static局部变量只被初始化一次，下一次依据上一次结果值； 　 

3.  static函数与普通函数有什么区别？

　　（1）可见范围
　　 static函数与普通函数作用域不同,**仅在本文件**。只在当前源文件中使用的函数应该说明为内部函数(static修饰的函数)，内部函数应该在当前源文件中说明和定义。对于可在当前源文件以外使用的函数，应该在一个头文件中说明，要使用这些函数的源文件要包含这个头文件.

static函数在内存中只有一份，普通函数在每个被调用中维持一份拷贝

